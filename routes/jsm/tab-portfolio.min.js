var portfolioTabWidgetsLoaded=!1;function doPortfolioTabWidgets(){portfolioTabWidgetsLoaded||(portfolioTabWidgetsLoaded=!0,$("#divEvents").on("newrtap",function(e,i){}),$("#divEvents").on("rtapinserted",function(e,i){}),$("#divEvents").on("insertrtap",function(e,i){}),$("#divEvents").on("listrtaps",function(e,i){}),$("#divEvents").on("pvdepositadded",function(e,t){var a="",d="",o="",l="",n="",s=(new moment).format("YYYY-MM-DD HH:mm:ss");1==t.classtype?a=t.amount:2==t.classtype?d=t.amount:3==t.classtype?o=t.amount:l=t.amount,doGetGridFindId("divPortfolioG",t.memberid,function(e,i){e?(n=t.amount,$("#divPortfolioG").datagrid("appendRow",{memberid:t.memberid,balance:n,classa:a,classb:d,classc:o,classd:l,date:s})):$("#divPortfolioG").datagrid("updateRow",{index:i,row:{memberid:t.memberid,balance:n,classa:a,classb:d,classc:o,classd:l,date:s}})})}),$("#divPortfolioG").datagrid({idField:"memberid",fitColumns:!0,singleSelect:!0,rownumbers:!0,striped:!0,toolbar:[{text:"Add Deposit",iconCls:"icon-add",handler:function(){doDlgPVDepositAdd()}},{text:"Generate",iconCls:"icon-download",handler:function(){}},{text:"Period",iconCls:"icon-calendar",handler:function(){}},{text:"Refresh",iconCls:"icon-refreshlist",handler:function(){primus.emit("listportfolio",{fguid:fguid,uuid:uuid,session:session,pdata:{type:"refresh"}})}}],columns:[[{title:"Member",field:"memberid",width:200,align:"left",resizable:!0,formatter:function(e,i){return doGetTextFromTreeArray(cache_employees,e)}},{title:"Balance",field:"balance",width:200,align:"right",resizable:!0},{title:"Class A",field:"classa",width:200,align:"right",resizable:!0},{title:"Class B",field:"classb",width:200,align:"right",resizable:!0},{title:"Class C",field:"classc",width:200,align:"right",resizable:!0},{title:"Class D",field:"classd",width:200,align:"right",resizable:!0},{title:"Date",field:"date",width:180,align:"right",resizable:!0}]],onDblClickCell:function(e,i,t){doGetGridGetRowDataByIndex("divPortfolioG",e,function(e){})}}))}