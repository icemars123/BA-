function doSelectTemplatesTabWidgets(){var e=[{text:"Select All",iconCls:"icon-add",handler:function(){var e=$("#divSelectProductTemplatesTG").treegrid("getRoots");_.isNull(e)||e.forEach(function(e){$("#divSelectProductTemplatesTG").treegrid("checkNode",e.id)})}},{text:"Select None",iconCls:"icon-remove",handler:l}];function t(){$("#cbSelectTemplateClients").combotree("clear"),$("#fldSelectProductTemplatesCode").textbox("clear"),l()}function l(){var e=$("#divSelectProductTemplatesTG").treegrid("getRoots");_.isNull(e)||e.forEach(function(e){$("#divSelectProductTemplatesTG").treegrid("uncheckNode",e.id)})}function o(e,t){$("#dlgSelectProductTemplates").dialog("close")}$("#divEvents").on("newbuildtemplate",o),$("#dlgSelectProductTemplates").dialog({onClose:function(){$("#divEvents").off("newbuildtemplate",o),t()},onOpen:function(){$("#cbSelectTemplateClients").combotree({valueField:"id",textField:"name",limitToList:!0,data:cache_clients,onSelect:function(e){$("#fldSelectProductTemplatesCode").textbox("setValue",e.code)}}),$("#divSelectProductTemplatesTG").treegrid({idField:"id",treeField:"code",checkbox:!0,lines:!0,collapsible:!0,fitColumns:!1,autoRowHeight:!1,rownumbers:!1,striped:!0,toolbar:e,loader:function(e,t,l){t({total:cache_producttemplates.length,rows:cache_producttemplates})},frozenColumns:[[{title:"Code",field:"code",width:200,align:"left",resizable:!0,editor:"text"}]],columns:[[{title:"Name",field:"name",width:300,align:"left",resizable:!0},{title:"Client",field:"clientid",width:200,align:"left",resizable:!0,formatter:function(e,t){return doGetStringFromIdInObjArray(cache_clients,e)}},{title:"Qty",field:"qty",width:150,align:"right",resizable:!0},{title:"#Products",field:"numproducts",width:150,align:"right",resizable:!0}]]}),doTextboxFocus("cbSelectTemplateClients")},buttons:[{text:"Create",handler:function(){var e=$("#cbSelectTemplateClients").combotree("getValue"),t=$("#fldSelectProductTemplatesCode").textbox("getValue"),l=$("#divSelectProductTemplatesTG").treegrid("getCheckedNodes"),o=[];_.isBlank(t)?doMandatoryTextbox("Please enter a template code","fldSelectProductTemplatesCode"):(l.forEach(function(e){var t=$("#divSelectProductTemplatesTG").treegrid("getChildren",e.id);(_.isNull(t)||0==t.length)&&o.push(e.id)}),0<o.length?doServerDataMessage("newbuildtemplate",{code:t,clientid:e,templates:o},{type:"refresh"}):doShowError("Please select at least one template to copy..."))}},{text:"Reset",handler:function(){t()}},{text:"Close",handler:function(){$("#dlgSelectProductTemplates").dialog("close")}}]}).dialog("center").dialog("open")}