var maintenanceTabWidgetsLoaded=!1;function doMaintenanceTabWidgets(){if(!maintenanceTabWidgetsLoaded){var e=[{text:"Save",iconCls:"icon-save",handler:function(){primus.emit("saveconfig",{fguid:fguid,uuid:uuid,session:session,orderasquote:cache_config.orderasquote,statusid:cache_config.statusid,inventoryadjustaccountid:cache_config.inventoryadjustaccountid,currentquoteno:cache_config.currentquoteno,currentorderno:cache_config.currentorderno,currentporderno:cache_config.currentporderno,currentinvoiceno:cache_config.currentinvoiceno,currentjournalno:cache_config.currentjournalno,currentclientno:cache_config.currentclientno,currentsupplierno:cache_config.currentsupplierno,currentempno:cache_config.currentempno,currentjobsheetno:cache_config.currentjobsheetno,currentbarcodeno:cache_config.currentbarcodeno,inventoryusefifo:cache_config.inventoryusefifo,expressfee:cache_config.expressfee,defaultinventorylocationid:cache_config.defaultinventorylocationid,gstpaidaccountid:cache_config.gstpaidaccountid,gstcollectedaccountid:cache_config.gstcollectedaccountid,invoiceprinttemplateid:cache_config.invoiceprinttemplateid,orderprinttemplateid:cache_config.orderprinttemplateid,quoteprinttemplateid:cache_config.quoteprinttemplateid,deliverydocketprinttemplateid:cache_config.deliverydocketprinttemplateid,araccountid:cache_config.araccountid,apaccountid:cache_config.apaccountid,productcostofgoodsaccountid:cache_config.productcostofgoodsaccountid,productincomeaccountid:cache_config.productincomeaccountid,productassetaccountid:cache_config.productassetaccountid,productbuytaxcodeid:cache_config.productbuytaxcodeid,productselltaxcodeid:cache_config.productselltaxcodeid,fyearstart:cache_config.fyearstart,fyearend:cache_config.fyearend,companyname:cache_config.companyname,address1:cache_config.address1,address2:cache_config.address2,address3:cache_config.address3,address4:cache_config.address4,city:cache_config.city,state:cache_config.state,postcode:cache_config.postcode,country:cache_config.country,bankname:cache_config.bankname,bankbsb:cache_config.bankbsb,bankaccountno:cache_config.bankaccountno,bankaccountname:cache_config.bankaccountname,autosyncbuildtemplates:!1,attrib1name:cache_config.attrib1name,attrib2name:cache_config.attrib2name,attrib3name:cache_config.attrib3name,attrib4name:cache_config.attrib4name,attrib5name:cache_config.attrib5name,posclientid:cache_config.posclientid,pdata:{type:"refresh"}})}},{text:"Email Invoice Template",iconCls:"icon-email",handler:function(){doDlgEmailTemplate(itype_order_invoice)}},{text:"Email Order Template",iconCls:"icon-email",handler:function(){doDlgEmailTemplate(itype_order_order)}},{text:"Email Quote Template",iconCls:"icon-email",handler:function(){doDlgEmailTemplate(itype_order_quote)}}],t=[],o=[];$("#divEvents").on("loadconfig",function(e,c){o=[{name:"Quote Numbers",value:cache_config.currentquoteno,group:"Numbering",editor:"text"},{name:"Order Numbers",value:cache_config.currentorderno,group:"Numbering",editor:"text"},{name:"P.O. Numbers",value:cache_config.currentporderno,group:"Numbering",editor:"text"},{name:"Invoice Numbers",value:cache_config.currentinvoiceno,group:"Numbering",editor:"text"},{name:"Client Numbers",value:cache_config.currentclientno,group:"Numbering",editor:"text"},{name:"Supplier Numbers",value:cache_config.currentsupplierno,group:"Numbering",editor:"text"},{name:"Employee Numbers",value:cache_config.currentempno,group:"Numbering",editor:"text"},{name:"Job Sheet Numbers",value:cache_config.currentjobsheetno,group:"Numbering",editor:"text"},{name:"Barcode Numbers",value:cache_config.currentbarcodeno,group:"Numbering",editor:"text"},{name:"New Orders are Quotes",value:cache_config.orderasquote,group:"Orders",editor:{type:"checkbox",options:{on:!0,off:!1}}},{name:"A/R Account",value:cache_config.araccountid,group:"Orders",editor:{type:"combotree",options:{valueField:"id",textField:"name",data:cache_accounts}}},{name:"A/P Account",value:cache_config.apaccountid,group:"Orders",editor:{type:"combotree",options:{valueField:"id",textField:"name",data:cache_accounts}}},{name:"Express Fee (%)",value:cache_config.expressfee,group:"Orders",editor:{type:"numberbox",options:{groupSeparator:",",precision:2}},formatter:function(e,c,a){return _.isUndefined(c.id)?e:_.niceformatqty(e,2)}},{name:"Inventory Adjustment",value:cache_config.inventoryadjustaccountid,group:"Inventory",editor:{type:"combotree",options:{valueField:"id",textField:"name",data:cache_accounts}}},{name:"Deduct Stock On Order",value:cache_config.statusid,group:"Inventory",editor:{type:"combobox",options:{valueField:"id",textField:"name",data:orderstatustypes}}},{name:"Use FIFO",value:cache_config.inventoryusefifo,group:"Inventory",editor:{type:"checkbox",options:{on:!0,off:!1}}},{name:"Default Inventory Location",value:cache_config.defaultinventorylocationid,group:"Inventory",editor:{type:"combobox",options:{valueField:"id",textField:"name",data:cache_locations}}},{name:"Cost of Goods Account",value:cache_config.productcostofgoodsaccountid,group:"Products",editor:{type:"combotree",options:{valueField:"id",textField:"name",data:cache_accounts}}},{name:"Income Account",value:cache_config.productincomeaccountid,group:"Products",editor:{type:"combotree",options:{valueField:"id",textField:"name",data:cache_accounts}}},{name:"Asset Account",value:cache_config.productassetaccountid,group:"Products",editor:{type:"combotree",options:{valueField:"id",textField:"name",data:cache_accounts}}},{name:"Buy Tax Code",value:cache_config.productbuytaxcodeid,group:"Products",editor:{type:"combobox",options:{valueField:"id",textField:"name",data:cache_taxcodes}}},{name:"Sell Tax Code",value:cache_config.productselltaxcodeid,group:"Products",editor:{type:"combobox",options:{valueField:"id",textField:"name",data:cache_taxcodes}}},{name:"Paid",value:cache_config.gstpaidaccountid,group:"GST",editor:{type:"combotree",options:{valueField:"id",textField:"name",data:cache_accounts}}},{name:"Collected",value:cache_config.gstcollectedaccountid,group:"GST",editor:{type:"combotree",options:{valueField:"id",textField:"name",data:cache_accounts}}},{name:"Invoices",value:cache_config.invoiceprinttemplateid,group:"Print Template",editor:{type:"combobox",options:{valueField:"id",textField:"description",data:cache_printtemplates}}},{name:"Orders",value:cache_config.orderprinttemplateid,group:"Print Template",editor:{type:"combobox",options:{valueField:"id",textField:"description",data:cache_printtemplates}}},{name:"Quotes",value:cache_config.quoteprinttemplateid,group:"Print Template",editor:{type:"combobox",options:{valueField:"id",textField:"description",data:cache_printtemplates}}},{name:"Delivery Dockets",value:cache_config.deliverydocketprinttemplateid,group:"Print Template",editor:{type:"combobox",options:{valueField:"id",textField:"description",data:cache_printtemplates}}},{name:"Name",value:cache_config.companyname,group:"Company",editor:"text"},{name:"Address1",value:cache_config.address1,group:"Company",editor:"text"},{name:"Address2",value:cache_config.address2,group:"Company",editor:"text"},{name:"Address3",value:cache_config.address3,group:"Company",editor:"text"},{name:"Address4",value:cache_config.address4,group:"Company",editor:"text"},{name:"City",value:cache_config.city,group:"Company",editor:"text"},{name:"State",value:cache_config.state,group:"Company",editor:{type:"combobox",options:{valueField:"state",textField:"state",data:t}}},{name:"Postcode",value:cache_config.postcode,group:"Company",editor:"text"},{name:"Country",value:cache_config.country,group:"Company",editor:{type:"combobox",options:{valueField:"country",textField:"country",data:cache_countries,onSelect:function(e){var c,a;c=e,a=n("State"),_.isNull(a)||doGridGetEditor("divSettingsPG",a,"value",function(e){t=doGetStatesFromCountry(c.country),console.log(t),_.isNull(e)||$(e.target).combobox("loadData",t)})}}}},{name:"Financial Year Start",value:cache_config.fyearstart,group:"Company",editor:{type:"datebox",options:{formatter:function(e){return _.nicedatetodisplay(e)},parser:function(e){return _.isUndefined(e)||_.isBlank(e)?new Date:moment(e).toDate()},onSelect:function(e){var c,a;c=new moment(e).add({years:1}).format("YYYY-MM-DD"),a=n("Financial Year End"),_.isNull(a)||$("#divSettingsPG").propertygrid("updateRow",{index:a,row:{value:c}})}}}},{name:"Financial Year End",value:cache_config.fyearend,group:"Company",editor:{type:"datebox",options:{formatter:function(e){return _.nicedatetodisplay(e)},parser:function(e){return _.isUndefined(e)||_.isBlank(e)?new Date:moment(e).toDate()}}}},{name:"Bank Name",value:cache_config.bankname,group:"Banking",editor:"text"},{name:"Bank BSB",value:cache_config.bankbsb,group:"Banking",editor:"text"},{name:"Bank Account No.",value:cache_config.bankaccountno,group:"Banking",editor:"text"},{name:"Bank Account Name",value:cache_config.bankaccountname,group:"Banking",editor:"text"},{name:"Attribute 1",value:cache_config.attrib1name,group:"Custom Attributes",editor:"text"},{name:"Attribute 2",value:cache_config.attrib2name,group:"Custom Attributes",editor:"text"},{name:"Attribute 3",value:cache_config.attrib3name,group:"Custom Attributes",editor:"text"},{name:"Attribute 4",value:cache_config.attrib4name,group:"Custom Attributes",editor:"text"},{name:"Attribute 5",value:cache_config.attrib5name,group:"Custom Attributes",editor:"text"},{name:"POS Client",value:cache_config.posclientid,group:"POS",editor:{type:"combotree",options:{valueField:"id",textField:"name",data:cache_clients}}}],$("#divSettingsPG").propertygrid("reload")}),$("#divEvents").on("saveconfig",function(e,c){primus.emit("loadconfig",{fguid:fguid,uuid:uuid,session:session,pdata:{type:"refresh"}})}),$("#divEvents").on("configsaved",function(e,c){primus.emit("loadconfig",{fguid:fguid,uuid:uuid,session:session,pdata:{type:"refresh"}})}),maintenanceTabWidgetsLoaded=!0,$("#divSettingsPG").propertygrid({showGroup:!0,scrollbarSize:0,toolbar:e,columns:[[{field:"name",title:"Name",width:300,resizable:!0},{field:"value",title:"Value",width:300,resizable:!0,formatter:function(e,c){switch(c.name){case"Inventory Adjustment":case"A/R Account":case"A/P Account":case"Cost of Goods Account":case"Income Account":case"Asset Account":case"Paid":case"Collected":return doGetNameFromTreeArray(cache_accounts,e);case"Buy Tax Code":case"Sell Tax Code":return doGetNameFromTreeArray(cache_taxcodes,e);case"Deduct Stock On Order":return doGetStringFromIdInObjArray(orderstatustypes,e);case"Default Inventory Location":return doGetStringFromIdInObjArray(cache_locations,e);case"Invoices":case"Orders":case"Quotes":case"Delivery Dockets":return doGetDescFromIdInObjArray(cache_printtemplates,e);case"POS Client":return doGetNameFromTreeArray(cache_clients,e);default:return e}}}]],loader:function(e,c,a){c({total:1,rows:o})},onAfterEdit:function(e,c,a){if(!_.isEmpty(a))switch(e){case 0:cache_config.currentquoteno=a.value;break;case 1:cache_config.currentorderno=a.value;break;case 2:cache_config.currentporderno=a.value;break;case 3:cache_config.currentinvoiceno=a.value;break;case 4:cache_config.currentclientno=a.value;break;case 5:cache_config.currentsupplierno=a.value;break;case 6:cache_config.currentempno=a.value;break;case 7:cache_config.currentjobsheetno=a.value;break;case 8:cache_config.currentbarcodeno=a.value;break;case 9:cache_config.orderasquote=a.value;break;case 10:cache_config.araccountid=a.value;break;case 11:cache_config.apaccountid=a.value;break;case 12:cache_config.expressfee=a.value;break;case 13:cache_config.inventoryadjustaccountid=a.value;break;case 14:cache_config.statusid=a.value;break;case 15:cache_config.inventoryusefifo=a.value;break;case 16:cache_config.defaultinventorylocationid=a.value;break;case 17:cache_config.productcostofgoodsaccountid=a.value;break;case 18:cache_config.productincomeaccountid=a.value;break;case 19:cache_config.productassetaccountid=a.value;break;case 20:cache_config.productbuytaxcodeid=a.value;break;case 21:cache_config.productselltaxcodeid=a.value;break;case 22:cache_config.gstpaidaccountid=a.value;break;case 23:cache_config.gstcollectedaccountid=a.value;break;case 24:cache_config.invoiceprinttemplateid=a.value;break;case 25:cache_config.orderprinttemplateid=a.value;break;case 26:cache_config.quoteprinttemplateid=a.value;break;case 27:cache_config.deliverydocketprinttemplateid=a.value;break;case 28:cache_config.companyname=a.value;break;case 29:cache_config.address1=a.value;break;case 30:cache_config.address2=a.value;break;case 31:cache_config.address3=a.value;break;case 32:cache_config.address4=a.value;break;case 33:cache_config.city=a.value;break;case 34:cache_config.state=a.value;break;case 35:cache_config.postcode=a.value;break;case 36:cache_config.country=a.value;break;case 37:cache_config.fyearstart=a.value;break;case 38:cache_config.fyearend=a.value;break;case 39:cache_config.bankname=a.value;break;case 40:cache_config.bankbsb=a.value;break;case 41:cache_config.bankaccountno=a.value;break;case 42:cache_config.bankaccountname=a.value;break;case 43:cache_config.attrib1name=a.value;break;case 44:cache_config.attrib2name=a.value;break;case 45:cache_config.attrib3name=a.value;break;case 46:cache_config.attrib4name=a.value;break;case 47:cache_config.attrib5name=a.value;break;case 48:cache_config.posclientid=a.value}}})}function n(e){for(var c=0;c<o.length;c++)if(o[c].name==e)return c;return null}}