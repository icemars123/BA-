function doDlgUserPermissions(n){var e=[{text:"Save",iconCls:"icon-save",handler:function(){var e=$("#divPermissionsPG").propertygrid("getRows"),s={canvieworders:e[0].value,cancreateorders:e[1].value,canviewinvoices:e[2].value,cancreateinvoices:e[3].value,canviewinventory:e[4].value,cancreateinventory:e[5].value,canviewpayroll:e[6].value,cancreatepayroll:e[7].value,canviewproducts:e[8].value,cancreateproducts:e[9].value,canviewclients:e[10].value,cancreateclients:e[11].value,canviewcodes:e[12].value,cancreatecodes:e[13].value,canviewusers:e[14].value,cancreateusers:e[15].value,canviewbuilds:e[16].value,cancreatebuilds:e[17].value,canviewtemplates:e[18].value,cancreatetemplates:e[19].value,canviewbanking:e[20].value,cancreatebanking:e[21].value,canviewpurchasing:e[22].value,cancreatepurchasing:e[23].value,canviewalerts:e[24].value,cancreatealerts:e[25].value,canviewdashboard:e[26].value,cancreatedashboard:e[27].value};doServerDataMessage("saveuserpermissions",{useruuid:n.uuid,permissions:s},{type:"refresh"})}}];function r(e,s,a){return{name:e,value:s,group:a,editor:{type:"checkbox",options:{on:1,off:0}}}}function s(e,s){$("#dlgUserPermissions").dialog("close")}$("#divEvents").on("saveuserpermissions",s),$("#dlgUserPermissions").dialog({title:"Permissions for "+n.name,onClose:function(){$("#divEvents").off("saveuserpermissions",s)},onOpen:function(){$("#divPermissionsPG").propertygrid({showGroup:!0,scrollbarSize:0,toolbar:e,loader:function(e,s,a){cache_userpermissions=[],cache_userpermissions.push(r("Can View",n.canvieworders,"Orders")),cache_userpermissions.push(r("Can Create",n.cancreateorders,"Orders")),cache_userpermissions.push(r("Can View",n.canviewinvoices,"Invoices")),cache_userpermissions.push(r("Can Create",n.cancreateinvoices,"Invoices")),cache_userpermissions.push(r("Can View",n.canviewinventory,"Inventory")),cache_userpermissions.push(r("Can Create",n.cancreateinventory,"Inventory")),cache_userpermissions.push(r("Can View",n.canviewpayroll,"Payroll")),cache_userpermissions.push(r("Can Create",n.cancreatepayroll,"Payroll")),cache_userpermissions.push(r("Can View",n.canviewproducts,"Products")),cache_userpermissions.push(r("Can Create",n.cancreateproducts,"Products")),cache_userpermissions.push(r("Can View",n.canviewclients,"Clients")),cache_userpermissions.push(r("Can Create",n.cancreateclients,"Clients")),cache_userpermissions.push(r("Can View",n.canviewcodes,"Codes")),cache_userpermissions.push(r("Can Create",n.cancreatecodes,"Codes")),cache_userpermissions.push(r("Can View",n.canviewusers,"Users")),cache_userpermissions.push(r("Can Create",n.cancreateusers,"Users")),cache_userpermissions.push(r("Can View",n.canviewbuilds,"Builds")),cache_userpermissions.push(r("Can Create",n.cancreatebuilds,"Builds")),cache_userpermissions.push(r("Can View",n.canviewtemplates,"Templates")),cache_userpermissions.push(r("Can Create",n.cancreatetemplates,"Templates")),cache_userpermissions.push(r("Can View",n.canviewbanking,"Banking")),cache_userpermissions.push(r("Can Create",n.cancreatebanking,"Banking")),cache_userpermissions.push(r("Can View",n.canviewpurchasing,"Purchasing")),cache_userpermissions.push(r("Can Create",n.cancreatepurchasing,"Purchasing")),cache_userpermissions.push(r("Can View",n.canviewalerts,"Alerts")),cache_userpermissions.push(r("Can Create",n.cancreatealerts,"Alerts")),cache_userpermissions.push(r("Can View",n.canviewdashboard,"Dashboard")),cache_userpermissions.push(r("Can Create",n.cancreatedashboard,"Dashboard")),s({total:cache_userpermissions.length,rows:cache_userpermissions})},columns:[[{field:"name",title:"Action",width:100},{field:"value",title:"Permission",width:80,formatter:function(e,s,a){return mapBoolToImage(e)}}]]})},buttons:[{text:"Close",handler:function(){$("#dlgUserPermissions").dialog("close")}}]}).dialog("center").dialog("open")}