var taxcodesTabWidgetsLoaded=!1;function doTaxCodesTabWidgets(){function e(e,t){doServerMessage("listtaxcodes",{type:"refresh",taxcodeid:t.data.taxcodeid})}taxcodesTabWidgetsLoaded||(taxcodesTabWidgetsLoaded=!0,$("#divEvents").on("newtaxcode",e),$("#divEvents").on("savetaxcode",e),$("#divEvents").on("expiretaxcode",e),$("#divEvents").on("listtaxcodes",function(e,t){doGridReloadAndSelectId("divTaxCodesG",t.pdata.taxcodeid)}),$("#divEvents").on("taxcodespopup",function(e,t){"new"==t?doDlgTaxCodeNew(null):"clear"==t?$("#divTaxCodesG").datagrid("clearSelections"):"remove"==t&&(doGridGetSelectedRowData("divTaxCodesG",function(t){doPromptOkCancel("Remove "+t.name+"?",function(e){_.isNull(e)||doServerDataMessage("expiretaxcode",{taxcodeid:t.id},{type:"refresh"})})})||doShowError("Please select a taxcode to remove"))}),$("#divTaxCodesG").datagrid({idField:"id",fitColumns:!1,singleSelect:!0,rownumbers:!0,striped:!0,toolbar:"#tbTaxCodes",showFooter:!0,sortName:"name",sortOrder:"asc",remoteSort:!1,multiSort:!0,loader:function(e,t,o){t({total:cache_taxcodes.length,rows:cache_taxcodes}),$(this).datagrid("reloadFooter",[{name:'<span class="totals_footer">'+cache_taxcodes.length+" Tax Codes</span>"}])},frozenColumns:[[{title:"Name",field:"name",width:300,align:"left",resizable:!0,sortable:!0}]],columns:[[{title:"Code",field:"code",width:200,align:"left",resizable:!0,sortable:!0},{title:"Percent",field:"percent",width:100,align:"right",resizable:!0,sortable:!0},{title:"Modified",field:"date",width:150,align:"right",resizable:!0,sortable:!0},{title:"By",field:"by",width:200,align:"left",resizable:!0,sortable:!0}]],onRowContextMenu:function(e,t,o){doGridContextMenu("divTaxCodesG","divTaxCodesMenuPopup",e,t,o)},onDblClickCell:function(e,t,o){doGetGridGetRowDataByIndex("divTaxCodesG",e,function(e){doDlgTaxCodeNew(e.id)})}}))}