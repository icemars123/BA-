exports.dropSupplierAttachmentPost=function(s,n){var o={message:"Error writing file"};__.isUndefined(s.body)||__.isNull(s.body)?n.json({message:"No form to upload"}):__.isUndefined(s.body.supplierid)||__.isNull(s.body.supplierid)?n.json({message:"No file to upload"}):__.isUndefined(s.files)||__.isUndefined(s.files.file)||global.modsuppliers.newSupplierAttachment({filename:s.files.file.originalFilename,supplierid:s.body.supplierid,uuid:s.body.uuid,description:s.body.description,mimetype:s.files.file.type,size:s.files.file.size},function(i,e){if(i)n.json(o);else{var l=global.path.join(__dirname,global.config.folders.clientattachments+e+"_"+s.body.supplierid+"_"+s.files.file.originalFilename);global.fs.rename(s.files.file.path,l,function(i){i?n.json(o):global.fs.unlink(s.files.file.path,function(){i||(o={id:e,filename:s.files.file.originalFilename}),n.json(o)})})}})};