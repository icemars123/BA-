function doDlgInventoryTransfer(){function o(o,e){$("#cbInventorySourceLocations").combotree("loadData",cache_locations),$("#cbInventoryDestinationLocations").combotree("loadData",cache_locations)}$("#divEvents").on("listlocations",o),$("#dlgInventoryTransfer").dialog({onClose:function(){$("#divEvents").off("listlocations",o)},onOpen:function(){$("#cbInventorySourceLocations").combotree({valueField:"id",textField:"name",data:cache_locations}),$("#cbInventoryDestinationLocations").combotree({valueField:"id",textField:"name",data:cache_locations}),$("#cbInventoryTransferProducts").combobox({valueField:"id",textField:"code",groupField:"productcategoryname",data:cache_products})},buttons:[{text:"Transfer",handler:function(){var o=doGetComboTreeSelectedId("cbInventorySourceLocations"),e=doGetComboTreeSelectedId("cbInventoryDestinationLocations"),t=$("#cbInventoryTransferProducts").combobox("getValue"),n=$("#fldInventoryTransferQty").textbox("getValue"),a=$("#fldInventoryTransferBatchno").textbox("getValue");o!=e?_.isBlank(t)?doShowError("Please select a product to add to inventory"):_.isBlank(n)||_.toBigNum(n).isZero()?doShowError("Please enter a non zero qty"):(doServerDataMessage("transferinventory",{srclocationid:o,dstlocationid:e,productid:t,qty:n,batchno:a},{type:"refresh"}),$("#dlgInventoryTransfer").dialog("close")):doShowError("Can not transfer from and to the same location")}},{text:"Close",handler:function(){$("#dlgInventoryTransfer").dialog("close")}}]}).dialog("center").dialog("open")}