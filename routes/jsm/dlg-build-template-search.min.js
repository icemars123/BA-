function doDlgBuildTemplateSearch(i){function e(e,l){var t=[];l.data.rs.forEach(function(e){t.push({id:doNiceId(e.id),name:doNiceString(e.name),code:doNiceString(e.code)})}),$("#divBuildTemplateSelectG").datagrid("loadData",t),$("#divBuildTemplateSelectG").datagrid("reloadFooter",[{name:'<span class="totals_footer">'+t.length+" found</span>"}])}$("#divEvents").on("buildtemplatesearch",e),$("#dlgBuildTemplateSearch").dialog({onClose:function(){$("#divEvents").off("buildtemplatesearch",e)},onOpen:function(){$("#fldSearchBuildTemplateText").textbox({iconCls:"icon-product",iconAlign:"left",onChange:function(e,l){var t=$("#cbSearchBuildTemplateMaxHistory").combobox("getValue");doServerDataMessage("buildtemplatesearch",{value:e,maxhistory:t},{type:"refresh"})}}),$("#divBuildTemplateSelectG").datagrid({idField:"id",fitColumns:!1,singleSelect:!0,rownumbers:!0,striped:!0,showFooter:!0,columns:[[{title:"Code",field:"code",width:200,align:"left",resizable:!0},{title:"Name",field:"name",width:300,align:"left",resizable:!0}]],onDblClickCell:function(e,l,t){doGridGetSelectedRowData("divBuildTemplateSelectG",function(e){_.isUndefined(i)||_.isNull(i)||i(e)}),$("#dlgBuildTemplateSearch").dialog("close")}}),doTextboxFocus("fldSearchBuildTemplateText")},buttons:[{text:"Select",handler:function(){_.isUndefined(i)||_.isNull(i)||doGridGetSelectedRowData("divBuildTemplateSelectG",function(e){i(e),$("#dlgBuildTemplateSearch").dialog("close")})||noty({text:"Please select a build template...",type:"error",timeout:4e3})}},{text:"Close",handler:function(){$("#dlgBuildTemplateSearch").dialog("close")}}]}).dialog("center").dialog("open")}