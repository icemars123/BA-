var superfundsTabWidgetsLoaded=!1;function doSuperfundsTabWidgets(){superfundsTabWidgetsLoaded||(superfundsTabWidgetsLoaded=!0,$("#divEvents").on("listsuperfunds",function(e,d){$("#divSuperfundsG").datagrid("reload"),_.isUndefined(d.pdata.superfundid)||_.isNull(d.pdata.superfundid)||$("#divSuperfundsG").datagrid("selectRecord",d.pdata.superfundid)}),$("#divEvents").on("newsuperfund",function(e,d){primus.emit("listsuperfunds",{fguid:fguid,uuid:uuid,session:session,pdata:{type:"refresh",superfundid:d.data.superfundid}})}),$("#divEvents").on("savesuperfund",function(e,d){primus.emit("listsuperfunds",{fguid:fguid,uuid:uuid,session:session,pdata:{type:"refresh",superfundid:d.data.superfundid}})}),$("#divEvents").on("expiresuperfund",function(e,d){primus.emit("listsuperfunds",{fguid:fguid,uuid:uuid,session:session,pdata:{type:"refresh"}})}),$("#divEvents").on("superfundspopup",function(e,d){"new"==d?doDlgSuprfundNew():"clear"==d?$("#divSuperfundsG").datagrid("clearSelections"):"remove"==d&&(doGridGetSelectedRowData("divSuperfundsG",function(d){doPromptOkCancel("Remove "+d.name+"?",function(e){e&&primus.emit("expiresuperfund",{fguid:fguid,uuid:uuid,session:session,superfundid:d.id,pdata:{type:"refresh"}})})})||noty({text:"Please select a superfund to remove",type:"error",timeout:4e3}))}),$("#divSuperfundsG").datagrid({idField:"id",fitColumns:!1,singleSelect:!0,rownumbers:!0,striped:!0,toolbar:"#tbSuperfunds",showFooter:!0,sortName:"name",sortOrder:"asc",remoteSort:!1,multiSort:!0,loader:function(e,d,u){d({total:cache_superfunds.length,rows:cache_superfunds}),$(this).datagrid("reloadFooter",[{name:'<span class="totals_footer">'+cache_superfunds.length+" Funds</span>"}])},frozenColumns:[[{title:"Name",field:"name",width:300,align:"left",resizable:!0,sortable:!0}]],columns:[[{title:"Modified",field:"date",width:150,align:"right",resizable:!0,sortable:!0},{title:"By",field:"by",width:200,align:"left",resizable:!0,sortable:!0}]],onRowContextMenu:function(e,d,u){doGridContextMenu("divSuperfundsG","divSuperfundsMenuPopup",e,d,u)},onDblClickCell:function(e,d,u){doGetGridGetRowDataByIndex("divTaxCodesG",e,function(e){doDlgSuprfundNew(e.id)})}}))}