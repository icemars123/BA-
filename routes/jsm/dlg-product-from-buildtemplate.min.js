function doDlgProductFromBuildTemplate(d,o,l,r){function e(e,t){_.isNull(t.data.productcategoryid)||$("#cbProductCategoryFromBuildTemplate").combotree("setValue",t.data.productcategoryid),$("#fldNewProductCodeFromBuildTemplate").textbox("setValue",o+"-"),$("#fldNewProductNameFromBuildTemplate").textbox("setValue",l)}function t(e,t){$("#dlgNewProductFromBuildTemplate").dialog("close")}$("#divEvents").on("tpccproductcategoryfrombuildtemplate",e),$("#divEvents").on("tpcccreateproductfrombuildtemplate",t),$("#dlgNewProductFromBuildTemplate").dialog({onClose:function(){$("#divEvents").off("tpccproductcategoryfrombuildtemplate",e),$("#divEvents").off("tpcccreateproductfrombuildtemplate",t)},onOpen:function(){$("#cbProductCategoryFromBuildTemplate").combotree({valueField:"id",textField:"name",data:cache_productcategories,limitToList:!0}),doTextboxFocus("fldNewProductCodeFromBuildTemplate"),doServerDataMessage("tpccproductcategoryfrombuildtemplate",{buildtemplateid:d},{type:"refresh"})},buttons:[{text:"Add",handler:function(){var e=$("#cbProductCategoryFromBuildTemplate").combotree("getValue"),t=$("#fldNewProductCodeFromBuildTemplate").textbox("getValue"),o=$("#fldNewProductNameFromBuildTemplate").textbox("getValue");_.isBlank(e)||_.isBlank(t)||_.isBlank(o)||doServerDataMessage("tpcccreateproductfrombuildtemplate",{productcategoryid:e,clientid:r,code:t,name:o,buildtemplateid:d},{type:"refresh"})}},{text:"Reset",handler:function(){$("#cbProductCategoryFromBuildTemplate").combotree("clear"),$("#fldNewProductCodeFromBuildTemplate").textbox("clear"),$("#fldNewProductNameFromBuildTemplate").textbox("clear")}},{text:"Close",handler:function(){$("#dlgNewProductFromBuildTemplate").dialog("close")}}]}).dialog("center").dialog("open")}